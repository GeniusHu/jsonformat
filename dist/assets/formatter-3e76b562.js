import"./modulepreload-polyfill-3cfb730f.js";let i,o;document.addEventListener("DOMContentLoaded",()=>{i=CodeMirror(document.getElementById("json-input"),{mode:{name:"javascript",json:!0},theme:"default",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],lint:!0,indentUnit:4,tabSize:4,lineWrapping:!0,viewportMargin:1/0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0}),o=CodeMirror(document.getElementById("json-output"),{mode:{name:"javascript",json:!0},theme:"default",lineNumbers:!0,matchBrackets:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],readOnly:!0,lineWrapping:!0,viewportMargin:1/0,foldOptions:{widget:"..."}}),i.setValue(`{
    "example": "Paste your JSON here"
}`),i.clearHistory(),setTimeout(()=>{i.refresh(),o.refresh()},100),document.querySelector(".editor-container:first-child .editor-actions #paste").addEventListener("click",l),document.querySelector(".editor-container:first-child .editor-actions #format").addEventListener("click",u),document.querySelector(".editor-container:first-child .editor-actions #expand").addEventListener("click",v),document.querySelector(".editor-container:first-child .editor-actions #minify").addEventListener("click",f),document.querySelector(".editor-container:first-child .editor-actions #clear").addEventListener("click",p),document.querySelector(".editor-container:last-child .editor-actions #upload").addEventListener("click",y),document.querySelector(".editor-container:last-child .editor-actions #download").addEventListener("click",h),document.querySelector(".editor-container:last-child .editor-actions #copy").addEventListener("click",g),document.getElementById("sort-keys").addEventListener("change",()=>{o.getValue()&&u()}),document.getElementById("line-numbers").addEventListener("change",e=>{const r=e.target.checked;i.setOption("lineNumbers",r),o.setOption("lineNumbers",r);const t=["CodeMirror-foldgutter"];r&&t.unshift("CodeMirror-linenumbers");const n=[...t];r&&n.push("CodeMirror-lint-markers"),i.setOption("gutters",n),o.setOption("gutters",t),i.refresh(),o.refresh()}),i.setOption("extraKeys",{"Ctrl-V":l,"Cmd-V":l,"Ctrl-Q":function(e){e.foldCode(e.getCursor())}})});function a(e,r="info",t=2e3){const n={success:`<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>`,error:`<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>`,info:`<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>`},s=document.querySelector(".toast");s&&s.remove();const c=document.createElement("div");c.className=`toast ${r}`,c.innerHTML=`
        ${n[r]}
        <p class="toast-message">${e}</p>
    `,document.getElementById("toast-container").appendChild(c),setTimeout(()=>{c.style.animation="toast-out-center 0.3s cubic-bezier(0.21, 1.02, 0.73, 1) forwards",setTimeout(()=>c.remove(),300)},t)}async function l(){try{const e=await navigator.clipboard.readText();if(!e){a("No content in clipboard","error");return}i.setValue(e);try{JSON.parse(e),u()}catch{console.log("Pasted content is not valid JSON")}}catch(e){a(`Failed to read clipboard: ${e.message}`,"error")}}function u(){try{const e=i.getValue().trim();if(!e)return a("Please enter JSON data","error"),!1;const r=JSON.parse(e),t=document.getElementById("indent-size").value,n=document.getElementById("sort-keys").checked;let s;return n?s=JSON.stringify(m(r),null,t==="tab"?"	":Number(t)):s=JSON.stringify(r,null,t==="tab"?"	":Number(t)),o.setValue(s),!0}catch(e){return a(`Invalid JSON: ${e.message}`,"error"),!1}}function m(e){return e===null||typeof e!="object"?e:Array.isArray(e)?e.map(m):Object.keys(e).sort().reduce((r,t)=>(r[t]=m(e[t]),r),{})}function f(){try{const e=i.getValue().trim();if(!e){a("Please enter JSON data","error");return}const r=JSON.parse(e),t=JSON.stringify(r);o.setValue(t),setTimeout(()=>{o.refresh(),o.setOption("mode",{name:"javascript",json:!0})},100)}catch(e){a(`Invalid JSON: ${e.message}`,"error")}}function p(){i.setValue(""),o.setValue("")}function g(){const e=o.getValue();if(!e){a("No formatted output to copy","error");return}navigator.clipboard.writeText(e).then(()=>a("Copied to clipboard!","success")).catch(r=>a(`Failed to copy: ${r.message}`,"error"))}function y(){const e=document.createElement("input");e.type="file",e.accept=".json,application/json",e.onchange=r=>{const t=r.target.files[0];if(!t)return;const n=new FileReader;n.onload=s=>{i.setValue(s.target.result),u()},n.readAsText(t)},e.click()}function h(){const e=o.getValue();if(!e){a("No formatted output to download","error");return}const r=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download="formatted.json",n.click(),URL.revokeObjectURL(t)}document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="v"&&(i.hasFocus()||(e.preventDefault(),l()))});function v(){try{const e=i.getValue().trim();if(!e){a("Please enter JSON data","error");return}const r=JSON.parse(e),t=document.getElementById("indent-size").value,n=document.getElementById("sort-keys").checked;let s;n?s=JSON.stringify(m(r),null,t==="tab"?"	":Number(t)):s=JSON.stringify(r,null,t==="tab"?"	":Number(t)),o.setValue(s),setTimeout(()=>{const c=o.lineCount();for(let d=0;d<c;d++)o.isFoldable(d)&&o.foldCode({line:d,ch:0},null,"unfold")},100)}catch(e){a(`Invalid JSON: ${e.message}`,"error")}}
